<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - CoreMind Platform</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="platform.css">
</head>

<body>
    <div class="login-container">
        <div class="glass-panel login-card">
            <a href="../index.html" style="text-decoration: none; color: inherit;">
                <div class="login-logo"><span class="text-gradient">Core</span>Mind</div>
            </a>
            <h2 style="margin-bottom: 10px;">Welcome Back</h2>
            <p style="color: var(--text-muted); margin-bottom: 30px;">Sign in to manage your AI workforce</p>

            <form id="loginForm">
                <div class="input-group">
                    <label>Work Email</label>
                    <input type="email" id="email" class="input-field" placeholder="name@company.com" required>
                </div>

                <div class="input-group">
                    <label>Password</label>
                    <input type="password" id="password" class="input-field" required>
                </div>

                <button type="submit" class="btn btn-primary" style="width: 100%;">Sign In</button>
            </form>

            <p style="margin-top: 20px; font-size: 0.9rem; color: var(--text-muted);">
                Don't have an account? <a href="#" style="color: var(--primary);">Contact Sales</a>
            </p>
        </div>

        loginForm.addEventListener('submit', async (e) => {
        e.preventDefault();

        const email = emailInput.value;
        const password = passwordInput.value;

        // Show loading state
        submitBtn.textContent = 'Signing in...';
        submitBtn.disabled = true;

        try {
        const { data, error } = await supabase.auth.signInWithPassword({
        email: email,
        password: password,
        });

        if (error) throw error;

        // Login successful
        console.log('User logged in:', data.user);
        window.location.href = 'dashboard.html';

        } catch (error) {
        console.error('Login error:', error.message);
        alert('Login failed: ' + error.message);

        // Reset button
        submitBtn.textContent = 'Sign In';
        submitBtn.disabled = false;
        }
        });

        // Check if already logged in
        async function checkSession() {
        const { data: { session } } = await supabase.auth.getSession();
        if (session) {
        window.location.href = 'dashboard.html';
        }
        }

        checkSession();
        </script>
</body>

</html>